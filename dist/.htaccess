# ######################################################################
# # ERRORS                                                             #
# ######################################################################

# ----------------------------------------------------------------------
# | Custom error messages/pages                                        |
# ----------------------------------------------------------------------

# Customize what Apache returns to the client in case of an error.
# https://httpd.apache.org/docs/current/mod/core.html#errordocument

ErrorDocument 404 /404.html






# ######################################################################
# # REWRITES                                                           #
# ######################################################################

# ----------------------------------------------------------------------
# | Suppressing the `www.` at the beginning of URLs                    |
# ----------------------------------------------------------------------

# Rewrite www.example.com â†’ example.com

# The same content should never be available under two different
# URLs, especially not with and without `www.` at the beginning.
# This can cause SEO problems (duplicate content), and therefore,
# you should choose one of the alternatives and redirect the other
# one.
#
# (!) NEVER USE BOTH WWW-RELATED RULES AT THE SAME TIME!

# (1) The rule assume by default that both HTTP and HTTPS
#     environments are available for redirection.
#     If your SSL certificate could not handle one of the domains
#     used during redirection, you should turn the condition on.
#
#     https://github.com/h5bp/server-configs-apache/issues/52

<IfModule mod_rewrite.c>
    RewriteEngine On
    # (1)
    # RewriteCond %{HTTPS} !=on
    RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
    RewriteRule ^ %{ENV:PROTO}://%1%{REQUEST_URI} [R=301,L]
</IfModule>





<IfModule mod_rewrite.c>  
    RewriteEngine on  

	# if the address starts with "posts/", pick what comes afterwards, put it into the GET Parameter and quit (that's the [L]) 
	RewriteRule ^thoughts/([a-zA-Z0-9-/]+)$ /blog/post.php?s=$1 [L]
	RewriteRule ^sounds/([a-zA-Z0-9-/]+)$ /blog/post.php?s=$1 [L]
	RewriteRule ^bytes/([a-zA-Z0-9-/]+)$ /blog/post.php?s=$1 [L]
	RewriteRule ^links/([a-zA-Z0-9-/]+)$ /blog/post.php?s=$1 [L]

	RewriteRule ^thoughts/$ /blog/section.php?s=thoughts [L]
	RewriteRule ^sounds/$ /blog/section.php?s=sounds [L]
	RewriteRule ^bytes/$ /blog/section.php?s=bytes [L]
	RewriteRule ^links/$ /blog/section.php?s=links [L]

	RewriteRule ^blog/archive/([a-zA-Z0-9-/]+)$ /blog/archive.php?s=$1 [L]

	RewriteRule ^blog/archive/$ /blog/archive.php [L]
	
	# RewriteRule ^blog/([a-zA-Z0-9-/]+)$ /blog/post.php?s=$1 [L]

	# Once URLs are rewritten, draft post preview is achieved by adding /preview to the end of your URL, so remember to add a rule for that. You should rewrite it to add the query string argument preview=all to the URL.
	# ...
	

	# make sure the address we received (e.g. /mypage) is not an existing file      
	RewriteCond %{REQUEST_FILENAME} !-f
	#  make sure it's not an existing directory either
	RewriteCond %{REQUEST_FILENAME} !-d
	# make sure there IS an existing .php file corresponding to it
	RewriteCond %{REQUEST_FILENAME}.php -f


	
	
	# else if it wasn't a blog post, just append .php to it. Ah, and keep other get params (that's the QSA=Query String Append). 
	RewriteRule ^(.+)$ $1.php [L,QSA]

</IfModule>
