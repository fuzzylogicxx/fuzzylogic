<div class="l-stack">
  <ol role="list" class="l-stack">
  {% for post in postslist %}
    <li>
      <article class="l-stack c-post" itemscope itemtype="http://schema.org/BlogPosting">
        <div class="c-post__meta">
          {% switch post.data.tags[1] %}
            {% case "link" %}
              {{ component('icon', {
                name: 'bookmark',
                text: 'Bookmark'
              }) }}
            {% case "note" %}
              {{ component('icon', {
                name: 'note',
                text: 'Note'
              }) }}
            {% default %}
              {{ component('icon', {
                name: 'entry',
                text: 'Entry'
              }) }}
          {% endswitch %}
          <time itemprop="dateCreated pubdate datePublished" datetime="{{ post.date | htmlDateString }}">{{ post.date | readableDate }}</time>
          {% if(post.data.tags[1] === 'note') -%} <span>·</span> <a href="{{ post.url | url }}">{{ post.date | readableTime }}</a> <span>·</span> {{ post.data.location }}</span>{% endif -%}
        </div>
        {% if (post.data.tags[1] !== 'note' or post.data.noteWithTitle) -%}
        <h3 itemprop="headline">
          {% if (post.data.linkTarget) -%}
          <a href="{{ post.data.linkTarget | url }}" class="text-icon-pair offsite">{{ post.data.title }}</a>
          {% else %}
          <a rel="bookmark" href="{{ post.url | url }}">{{ post.data.title }}</a>
          {% endif %}
        </h3>
        {% endif -%}
        <div itemprop="abstract" class="l-stack">
        {% if (post.data.page.excerpt) -%}
          {%- set excerpt = post.data.page.excerpt -%}{{ excerpt | markdownStringToHTML | safe }}
          {% if post.data.mainImage.url and (app.environment == "production") %}
          <figure>
          {%- if post.data.mainImage.isAnchor %}<a href="{{ post.url | url }}">{%- endif %}
          {% respimg "" + post.data.mainImage.url + "", "" + post.data.mainImage.alt + "", "(min-width: 1600px) 646px, (min-width: 700px) 612px, 91.58vw", post.data.mainImage.aspectRatioWidth, post.data.mainImage.aspectRatioHeight %}
          {%- if post.data.mainImage.isAnchor %}</a>{%- endif %}
          {%- if post.data.mainImage.figcaption %}<figcaption>{{ post.data.mainImage.figcaption }}</figcaption>{%- endif %}
          </figure>
          {% endif %}
          {% if (post.data.linkTarget) -%}
          <p class="bookmark-options">
            <a href="{{ post.url | url }}">Read my notes</a> /
            <a class="text-icon-pair offsite" href="{{ post.data.linkTarget | url }}">
              <span>Visit original</span>
              {{ component('icon', { name: 'offsite' }) }}
            </a>
          </p>
          {%- else -%}
          <p><a href="{{ post.url | url }}">Read entry »</a></p>
          {% endif %}
        {%- else -%}
          {{ post.templateContent | markdownStringToHTML | safe }}
        {%- endif %}
        </div>
        {# <footer class="stack">
          <div class="cluster">
            <ul class="tags">
            {% for tag in post.data.tags %}
              {%- if (tag != "posts") and (tag != "link") and (tag != "note") and (tag != "entry") -%}
              {% set tagUrl %}/tags/{{ tag }}/{% endset %}
              <li><a rel="tag" href="{{ tagUrl | url }}" class="tag">{{ tag }}</a></li>
              {%- endif -%}
            {% endfor %}
            </ul>
          </div>
        </footer> #}
      </article>
    </li>
  {% endfor %}
  </ol>
</div>
