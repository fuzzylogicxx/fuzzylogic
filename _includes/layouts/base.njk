<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
      {%- if (renderData.title) -%}
      {{ renderData.title }} | {{ metadata.name }}
      {%- elif (title) -%}
      {{ title }} | {{ metadata.name }}
      {%- else -%}
      {{ metadata.title }}
      {%- endif -%}
    </title>
    <meta name="description" content="{{ renderData.description or description or metadata.description }}">

    <style>{% include "css/main.css" %}</style>

    <link rel="alternate" href="{{ metadata.feed.path | url }}" type="application/atom+xml" title="{{ metadata.name }}">
  </head>
  <body>
    <header>
      <h1 class="home"><a href="{{ '/' | url }}">{{ metadata.name }}</a></h1>
      <ul class="nav">
        {%- for nav in collections.nav | reverse -%}
        <li {% if nav.data.navID %}id="{{ nav.data.navID }}"{% endif %} class="nav-item{% if nav.url == page.url %} nav-item-active{% endif %}"><a href="{{ nav.url | url }}">{{ nav.data.navtitle }}</a></li>
        {%- endfor -%}
      </ul>

      <div class="search-ui invisible">
        <input type="text" id="search-str" class="search-str">
        <ol class="search-results">
        </ol>
      </div>
    </header>

    <main{% if templateClass %} class="{{ templateClass }}"{% endif %}>
      {{ content | safe }}
    </main>

    <footer>
    <a href="{{ metadata.feed.url | url }}">RSS</a>
    <a href="{{ '/sitemap/' | url }}">Sitemap</a>
    </footer>

    <!-- Current page: {{ page.url | url }} -->

    <!-- SVGs used repeatedly on the page are better defined as symbols, then <use>d -->
    <svg width="0" height="0" style="display: none;">
      <symbol id="icon-offsite" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <title>External Link</title>
        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3"></path>
      </symbol>
      <symbol id="icon-bookmark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <title>Bookmark</title>
        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
      </symbol>
      <symbol id="icon-search" viewBox="0 0 56.966 56.966">
        <title>Search</title>
          <path fill="currentColor" d="M55.146 51.887L41.588 37.786A22.926 22.926 0 0 0 46.984 23c0-12.682-10.318-23-23-23s-23 10.318-23 23 10.318 23 23 23c4.761 0 9.298-1.436 13.177-4.162l13.661 14.208c.571.593 1.339.92 2.162.92.779 0 1.518-.297 2.079-.837a3.004 3.004 0 0 0 .083-4.242zM23.984 6c9.374 0 17 7.626 17 17s-7.626 17-17 17-17-7.626-17-17 7.626-17 17-17z"></path>
      </symbol>
    </svg>

    <!-- polyfills first so that subsequent scripts (which might use matches() and so on) etc are polyfilled -->
    <script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

    <script>{% include "js/fuzzylogic.js" %}</script>

  </body>
</html>
