[build]
  command = "npm run build"
  publish = "_site"
  functions = "functions"

[build.environment]
    NODE_VERSION = "10.15"

# Redirect old blog URLs to new Journal URLs

[[redirects]]
  from = "/thoughts/current-reading-1984-by-george-orwell"
  to = "/posts/1984-by-george-orwell/"
  status = 301
  
[[redirects]]
  from = "/thoughts/flexible-tag-style-collections-and-pages-for-non-tag-key-in-eleventy/"
  to = "/posts/flexible-tag-like-functionality-for-custom-keys-in-eleventy/"
  status = 301

[[redirects]]
  from = "/blog/"
  to = "/posts/"
  status = 301

[[redirects]]
  from = "/thoughts/*"
  to = "/posts/:splat/"
  status = 301

[[redirects]]
  from = "/bytes/*"
  to = "/posts/:splat/"
  status = 301

[[redirects]]
  from = "/links/*"
  to = "/posts/:splat/"
  status = 301

[[redirects]]
  from = "/sounds/*"
  to = "/posts/:splat/"
  status = 301

[[headers]]
  for = "*.woff"
  [headers.values]
    Cache-Control = "public, max-age=18144000"

[[headers]]
  for = "*.woff2"
  [headers.values]
    Cache-Control = "public, max-age=18144000"
